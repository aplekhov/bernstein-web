!!!
%html{:xmlns => "http://www.w3.org/1999/xhtml"}
  %head
    %title
      OSC Web interface

    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}
    %meta{:content => "width=device-width, initial-scale=1.0", :name => "viewport"}

    %script{:src => "/javascripts/jquery-1.11.1.min.js", :type => "text/javascript"}  
    %script{:src => "/javascripts/bootstrap.min.js", :type => "text/javascript"}
    %script{:src => "/javascripts/bernstein.js", :type => "text/javascript"}


    %link{:rel => "stylesheet", :href => "/css/bootstrap.min.css", :media => "screen"}


  %body
    %h1 Open Sound Control (OSC) web interface
    %form.form-inline.osc
      %fieldset
        %legend Input an OSC message
        %label OSC message 
        %input{type: 'text', name: 'message_string', autocomplete: 'off', placeholder: 'ex: /synth/filter 453 2.3'}
        %button.submit{type: 'submit', autocomplete: 'off'} Send Message

      .row
        .span2.status Status:
        %img.spinner{:src => 'spinner.gif', :style => 'display:none'}


  :javascript 
    $('form.osc').submit(function(event){
        event.preventDefault();
        $(this).find(':input').attr("disabled","disabled");
        $(this).find('.spinner').show();
        $(this).find('.status').text('Status:');
        var message = $(this).find(":input[name='message_string']").val().split(' ');
        BERNSTEIN.sendMessage(message.shift(),message, function(){
          var form = $(this);
          form.find(':input').attr("disabled",false);
          form.find('.status').addClass('text-success').text('Status: Success!');
          form.find('.spinner').hide();
          },
          {
            onError: function(error){
              var form = $(this);
              form.find('.status').addClass('text-warning').text('Status: Error!');
              form.find(':input').attr("disabled",false);
              form.find('.spinner').hide();
            },
            context: this
          }
        );
      });
